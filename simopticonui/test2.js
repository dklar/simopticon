const resultData = {
    "run": [
        {
            "parameters": [
                {
                    "name": "*.node[*].scenario.caccC1",
                    "unit": "",
                    "value": 0.6666666666666666
                },
                {
                    "name": "*.node[*].scenario.caccOmegaN",
                    "unit": "Hz",
                    "value": 6.683333333333333
                },
                {
                    "name": "*.node[*].scenario.caccXi",
                    "unit": "",
                    "value": 1.0
                }
            ],
            "path": "/home/dklar/Uni/plexe/examples/platooning/optResults/4",
            "rank": 10,
            "value": 25.040938747233334
        },
        {
            "parameters": [
                {
                    "name": "*.node[*].scenario.caccC1",
                    "unit": "",
                    "value": 0.0
                },
                {
                    "name": "*.node[*].scenario.caccOmegaN",
                    "unit": "Hz",
                    "value": 6.683333333333333
                },
                {
                    "name": "*.node[*].scenario.caccXi",
                    "unit": "",
                    "value": 1.0
                }
            ],
            "path": "/home/dklar/Uni/plexe/examples/platooning/optResults/9",
            "rank": 9,
            "value": 25.020079946775
        },
        {
            "parameters": [
                {
                    "name": "*.node[*].scenario.caccC1",
                    "unit": "",
                    "value": 0.0
                },
                {
                    "name": "*.node[*].scenario.caccOmegaN",
                    "unit": "Hz",
                    "value": 0.05
                },
                {
                    "name": "*.node[*].scenario.caccXi",
                    "unit": "",
                    "value": 1.0
                }
            ],
            "path": "/home/dklar/Uni/plexe/examples/platooning/optResults/0",
            "rank": 8,
            "value": 22.413643632158333
        },
        {
            "parameters": [
                {
                    "name": "*.node[*].scenario.caccC1",
                    "unit": "",
                    "value": 0.6666666666666666
                },
                {
                    "name": "*.node[*].scenario.caccOmegaN",
                    "unit": "Hz",
                    "value": 0.05
                },
                {
                    "name": "*.node[*].scenario.caccXi",
                    "unit": "",
                    "value": 1.0
                }
            ],
            "path": "/home/dklar/Uni/plexe/examples/platooning/optResults/3",
            "rank": 7,
            "value": 20.022109607508334
        },
        {
            "parameters": [
                {
                    "name": "*.node[*].scenario.caccC1",
                    "unit": "",
                    "value": 0.6666666666666666
                },
                {
                    "name": "*.node[*].scenario.caccOmegaN",
                    "unit": "Hz",
                    "value": 0.05
                },
                {
                    "name": "*.node[*].scenario.caccXi",
                    "unit": "",
                    "value": 3.6666666666666665
                }
            ],
            "path": "/home/dklar/Uni/plexe/examples/platooning/optResults/6",
            "rank": 6,
            "value": 16.408381654761
        },
        {
            "parameters": [
                {
                    "name": "*.node[*].scenario.caccC1",
                    "unit": "",
                    "value": 0.3333333333333333
                },
                {
                    "name": "*.node[*].scenario.caccOmegaN",
                    "unit": "Hz",
                    "value": 10.0
                },
                {
                    "name": "*.node[*].scenario.caccXi",
                    "unit": "",
                    "value": 5.0
                }
            ],
            "path": "/home/dklar/Uni/plexe/examples/platooning/optResults/2",
            "rank": 5,
            "value": 0.9344862144333334
        },
        {
            "parameters": [
                {
                    "name": "*.node[*].scenario.caccC1",
                    "unit": "",
                    "value": 0.3333333333333333
                },
                {
                    "name": "*.node[*].scenario.caccOmegaN",
                    "unit": "Hz",
                    "value": 3.3666666666666663
                },
                {
                    "name": "*.node[*].scenario.caccXi",
                    "unit": "",
                    "value": 5.0
                }
            ],
            "path": "/home/dklar/Uni/plexe/examples/platooning/optResults/8",
            "rank": 4,
            "value": 0.3948647424583332
        },
        {
            "parameters": [
                {
                    "name": "*.node[*].scenario.caccC1",
                    "unit": "",
                    "value": 1.0
                },
                {
                    "name": "*.node[*].scenario.caccOmegaN",
                    "unit": "Hz",
                    "value": 10.0
                },
                {
                    "name": "*.node[*].scenario.caccXi",
                    "unit": "",
                    "value": 5.0
                }
            ],
            "path": "/home/dklar/Uni/plexe/examples/platooning/optResults/1",
            "rank": 3,
            "value": 0.047819020383333334
        },
        {
            "parameters": [
                {
                    "name": "*.node[*].scenario.caccC1",
                    "unit": "",
                    "value": 1.0
                },
                {
                    "name": "*.node[*].scenario.caccOmegaN",
                    "unit": "Hz",
                    "value": 3.3666666666666663
                },
                {
                    "name": "*.node[*].scenario.caccXi",
                    "unit": "",
                    "value": 5.0
                }
            ],
            "path": "/home/dklar/Uni/plexe/examples/platooning/optResults/5",
            "rank": 2,
            "value": 0.01746439275833332
        },
        {
            "parameters": [
                {
                    "name": "*.node[*].scenario.caccC1",
                    "unit": "",
                    "value": 1.0
                },
                {
                    "name": "*.node[*].scenario.caccOmegaN",
                    "unit": "Hz",
                    "value": 3.3666666666666663
                },
                {
                    "name": "*.node[*].scenario.caccXi",
                    "unit": "",
                    "value": 2.333333333333333
                }
            ],
            "path": "/home/dklar/Uni/plexe/examples/platooning/optResults/7",
            "rank": 1,
            "value": 0.0015639422333333208
        }
    ]
}

document.addEventListener('DOMContentLoaded', () => {
    const datatablesSimple = document.getElementById('datatablesSimple');
    if (datatablesSimple && resultData) {
        const formatParameter = (paramName, paramValue, paramUnit) => {
            const parts = paramName.split('.').pop().split('/');
            const paramNameWithoutPrefix = parts[parts.length - 1];
            return `${paramNameWithoutPrefix} = ${paramValue} ${paramUnit}`;
        };
        const newData = {
            headings: ["Rank", "Value","Parameter", "Path"],
            data: resultData.run.map(item => [
                item.rank,
                item.value,
                item.parameters.map(param => formatParameter(param.name, param.value, param.unit)).join("<br>"),
                item.path
            ])
        };
        datatable = new simpleDatatables.DataTable(datatablesSimple);
        datatable.insert(newData);
        datatable.on("datatable.selectrow", (rowIndex, event) => {
            event.preventDefault();
        });
    }
});